# ä½¿ç”¨ç¤ºä¾‹

æœ¬ç›®å½•åŒ…å«Q Chat APIæœåŠ¡çš„ä½¿ç”¨ç¤ºä¾‹å’Œæ¼”ç¤ºè„šæœ¬ã€‚

## æ–‡ä»¶è¯´æ˜

### session_isolation_demo.py

ä¼šè¯éš”ç¦»åŠŸèƒ½çš„å®Œæ•´æ¼”ç¤ºè„šæœ¬ï¼Œå±•ç¤ºä»¥ä¸‹åŠŸèƒ½ï¼š

- **åŸºæœ¬ä¼šè¯éš”ç¦»**: åˆ›å»ºä¼šè¯ã€ç”Ÿæˆæ–‡ä»¶ã€æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨
- **å¹¶è¡Œä¼šè¯å¤„ç†**: åŒæ—¶å¤„ç†å¤šä¸ªä¼šè¯çš„ä¸åŒä»»åŠ¡
- **æ–‡ä»¶ç®¡ç†**: åœ¨ä¼šè¯ä¸­åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¹¶ç®¡ç†

#### è¿è¡Œæ–¹å¼

```bash
# ç¡®ä¿APIæœåŠ¡æ­£åœ¨è¿è¡Œ
python app.py

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæ¼”ç¤º
python examples/session_isolation_demo.py
```

#### æ¼”ç¤ºå†…å®¹

1. **åŸºæœ¬éš”ç¦»æ¼”ç¤º**:
   - åˆ›å»ºä¼šè¯å¹¶è·å–å·¥ä½œç›®å½•ä¿¡æ¯
   - è¯·æ±‚AIåˆ›å»ºPythonè„šæœ¬
   - æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶åˆ—è¡¨
   - æ¸…ç†ä¼šè¯å’Œæ–‡ä»¶

2. **å¹¶è¡Œå¤„ç†æ¼”ç¤º**:
   - åŒæ—¶åˆ›å»º3ä¸ªä¼šè¯
   - å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ç¼–ç¨‹ä»»åŠ¡ï¼ˆPythonã€JavaScriptã€Shellï¼‰
   - å±•ç¤ºä¼šè¯é—´çš„å®Œå…¨éš”ç¦»
   - æ‰¹é‡æ¸…ç†æ‰€æœ‰ä¼šè¯

3. **æ–‡ä»¶ç®¡ç†æ¼”ç¤º**:
   - åœ¨å•ä¸ªä¼šè¯ä¸­åˆ›å»ºå¤šç§ç±»å‹çš„æ–‡ä»¶
   - å®æ—¶æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨å˜åŒ–
   - å±•ç¤ºæ–‡ä»¶ç®¡ç†APIçš„ä½¿ç”¨

#### é¢„æœŸè¾“å‡º

```
ğŸ¯ Q Chat ä¼šè¯éš”ç¦»åŠŸèƒ½æ¼”ç¤º
==================================================
âœ… APIæœåŠ¡è¿è¡Œæ­£å¸¸

ğŸ” æ¼”ç¤ºåŸºæœ¬ä¼šè¯éš”ç¦»åŠŸèƒ½
----------------------------------------
âœ… åˆ›å»ºä¼šè¯: 550e8400-e29b-41d4-a716-446655440000
ğŸ“ å·¥ä½œç›®å½•: sessions/550e8400-e29b-41d4-a716-446655440000

ğŸ’¬ è¯·æ±‚åˆ›å»ºPythonè„šæœ¬...
ğŸ¤– AIå›å¤: æˆ‘æ¥ä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªç®€å•çš„Pythonè„šæœ¬...

ğŸ“„ ä¼šè¯æ–‡ä»¶æ•°é‡: 1
   - hello.py (156 bytes)

ğŸ—‘ï¸ ä¼šè¯å·²åˆ é™¤: 550e8400-e29b-41d4-a716-446655440000

ğŸ” æ¼”ç¤ºå¹¶è¡Œä¼šè¯å¤„ç†
----------------------------------------
âœ… åˆ›å»ºä¼šè¯ 1: 660f9511-f3ac-52e5-b827-557766551111
âœ… åˆ›å»ºä¼šè¯ 2: 770a0622-04bd-63f6-c938-668877662222
âœ… åˆ›å»ºä¼šè¯ 3: 880b1733-15ce-74g7-da49-779988773333

ğŸš€ å¼€å§‹å¤„ç† Pythonä»»åŠ¡ (ä¼šè¯: 660f9511...)
ğŸš€ å¼€å§‹å¤„ç† JavaScriptä»»åŠ¡ (ä¼šè¯: 770a0622...)
ğŸš€ å¼€å§‹å¤„ç† Shellä»»åŠ¡ (ä¼šè¯: 880b1733...)

âœ… Pythonä»»åŠ¡ å®Œæˆ (ä¼šè¯: 660f9511...)
âœ… JavaScriptä»»åŠ¡ å®Œæˆ (ä¼šè¯: 770a0622...)
âœ… Shellä»»åŠ¡ å®Œæˆ (ä¼šè¯: 880b1733...)

ğŸ“„ Pythonä»»åŠ¡ ç”Ÿæˆäº† 1 ä¸ªæ–‡ä»¶
ğŸ“„ JavaScriptä»»åŠ¡ ç”Ÿæˆäº† 1 ä¸ªæ–‡ä»¶
ğŸ“„ Shellä»»åŠ¡ ç”Ÿæˆäº† 1 ä¸ªæ–‡ä»¶

ğŸ“Š æ‰€æœ‰ä¼šè¯çš„æœ€ç»ˆçŠ¶æ€:
   ä¼šè¯ 1: 1 ä¸ªæ–‡ä»¶ï¼Œç›®å½•: sessions/660f9511-f3ac-52e5-b827-557766551111
   ä¼šè¯ 2: 1 ä¸ªæ–‡ä»¶ï¼Œç›®å½•: sessions/770a0622-04bd-63f6-c938-668877662222
   ä¼šè¯ 3: 1 ä¸ªæ–‡ä»¶ï¼Œç›®å½•: sessions/880b1733-15ce-74g7-da49-779988773333

ğŸ—‘ï¸ æ¸…ç†æ‰€æœ‰ä¼šè¯...
   âœ… å·²åˆ é™¤ä¼šè¯: 660f9511...
   âœ… å·²åˆ é™¤ä¼šè¯: 770a0622...
   âœ… å·²åˆ é™¤ä¼šè¯: 880b1733...

ğŸ” æ¼”ç¤ºæ–‡ä»¶ç®¡ç†åŠŸèƒ½
----------------------------------------
âœ… åˆ›å»ºä¼šè¯: 990c2844-26df-85h8-eb5a-88aa99884444
ğŸ“ å·¥ä½œç›®å½•: sessions/990c2844-26df-85h8-eb5a-88aa99884444

ğŸ’¬ ä»»åŠ¡ 1: è¯·åˆ›å»ºä¸€ä¸ªconfig.jsonæ–‡ä»¶ï¼ŒåŒ…å«åº”ç”¨é…ç½®ä¿¡æ¯...
ğŸ¤– ä»»åŠ¡ 1 å®Œæˆ

ğŸ’¬ ä»»åŠ¡ 2: è¯·åˆ›å»ºä¸€ä¸ªREADME.mdæ–‡ä»¶ï¼Œè¯´æ˜é¡¹ç›®ç”¨é€”...
ğŸ¤– ä»»åŠ¡ 2 å®Œæˆ

ğŸ’¬ ä»»åŠ¡ 3: è¯·åˆ›å»ºä¸€ä¸ªrequirements.txtæ–‡ä»¶ï¼Œåˆ—å‡ºPythonä¾èµ–...
ğŸ¤– ä»»åŠ¡ 3 å®Œæˆ

ğŸ“„ æœ€ç»ˆæ–‡ä»¶åˆ—è¡¨:
   æ€»æ–‡ä»¶æ•°: 3
   å·¥ä½œç›®å½•: sessions/990c2844-26df-85h8-eb5a-88aa99884444
   - config.json (245 KB)
   - README.md (512 KB)
   - requirements.txt (89 KB)

ğŸ—‘ï¸ ä¼šè¯å·²åˆ é™¤ï¼Œæ–‡ä»¶å·²æ¸…ç†

==================================================
ğŸ‰ æ¼”ç¤ºå®Œæˆï¼

ğŸ’¡ è¦ç‚¹æ€»ç»“:
   - æ¯ä¸ªä¼šè¯éƒ½æœ‰ç‹¬ç«‹çš„å·¥ä½œç›®å½•
   - ä¸åŒä¼šè¯çš„æ–‡ä»¶æ“ä½œå®Œå…¨éš”ç¦»
   - å¯ä»¥å¹¶è¡Œå¤„ç†å¤šä¸ªä¼šè¯
   - ä¼šè¯åˆ é™¤æ—¶è‡ªåŠ¨æ¸…ç†æ–‡ä»¶
   - æä¾›APIæŸ¥çœ‹ä¼šè¯æ–‡ä»¶åˆ—è¡¨
```

## å…¶ä»–ç¤ºä¾‹

### åŸºæœ¬APIè°ƒç”¨ç¤ºä¾‹

```python
import requests

# åˆ›å»ºä¼šè¯
response = requests.post('http://localhost:8080/api/v1/sessions')
session_id = response.json()['session_id']

# å‘é€æ¶ˆæ¯
chat_data = {
    'session_id': session_id,
    'message': 'è¯·åˆ›å»ºä¸€ä¸ªPythonè„šæœ¬'
}
response = requests.post('http://localhost:8080/api/v1/chat', json=chat_data)
print(response.json()['message'])

# æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨
response = requests.get(f'http://localhost:8080/api/v1/sessions/{session_id}/files')
files = response.json()
print(f"ç”Ÿæˆäº† {files['file_count']} ä¸ªæ–‡ä»¶")

# åˆ é™¤ä¼šè¯
requests.delete(f'http://localhost:8080/api/v1/sessions/{session_id}')
```

### æµå¼èŠå¤©ç¤ºä¾‹

```python
import requests
import json

def stream_chat(session_id, message):
    data = {
        'session_id': session_id,
        'message': message
    }
    
    response = requests.post(
        'http://localhost:8080/api/v1/chat/stream',
        json=data,
        stream=True
    )
    
    for line in response.iter_lines():
        if line:
            line = line.decode('utf-8')
            if line.startswith('data: '):
                data = json.loads(line[6:])
                if data.get('type') == 'chunk':
                    print(data['message'], end='', flush=True)
                elif data.get('type') == 'done':
                    print('\nå®Œæˆ')
                    break

# ä½¿ç”¨ç¤ºä¾‹
session_id = 'your-session-id'
stream_chat(session_id, 'è¯·è¯¦ç»†ä»‹ç»Pythonçš„ç‰¹æ€§')
```

## æ³¨æ„äº‹é¡¹

1. **æœåŠ¡ä¾èµ–**: è¿è¡Œç¤ºä¾‹å‰è¯·ç¡®ä¿APIæœåŠ¡æ­£åœ¨è¿è¡Œ
2. **Amazon Q CLI**: ç¡®ä¿å·²æ­£ç¡®å®‰è£…å’Œé…ç½®Amazon Q CLI
3. **ç½‘ç»œè¿æ¥**: æŸäº›åŠŸèƒ½éœ€è¦ç½‘ç»œè¿æ¥åˆ°Amazon QæœåŠ¡
4. **æƒé™è®¾ç½®**: ç¡®ä¿æœ‰è¶³å¤Ÿçš„æ–‡ä»¶ç³»ç»Ÿæƒé™åˆ›å»ºå’Œåˆ é™¤ç›®å½•
5. **èµ„æºæ¸…ç†**: ç¤ºä¾‹ä¼šè‡ªåŠ¨æ¸…ç†åˆ›å»ºçš„ä¼šè¯å’Œæ–‡ä»¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥é”™è¯¯**: æ£€æŸ¥APIæœåŠ¡æ˜¯å¦åœ¨æ­£ç¡®ç«¯å£è¿è¡Œ
2. **æƒé™é”™è¯¯**: æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿæƒé™è®¾ç½®
3. **Q CLIé”™è¯¯**: æ£€æŸ¥Amazon Q CLIé…ç½®å’Œç½‘ç»œè¿æ¥
4. **è¶…æ—¶é”™è¯¯**: æŸäº›æ“ä½œå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…

### è°ƒè¯•æŠ€å·§

```bash
# æŸ¥çœ‹APIæœåŠ¡æ—¥å¿—
tail -f app.log

# æ£€æŸ¥ä¼šè¯ç›®å½•
ls -la sessions/

# æ‰‹åŠ¨æµ‹è¯•API
curl -X POST http://localhost:8080/api/v1/sessions
curl http://localhost:8080/health
```